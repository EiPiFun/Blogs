# PCIe bus and ids could be found by: lspci -nn | grep VGA

# intel only

export GBM_BACKEND=dri
export VK_DRIVER_FILES=/usr/share/vulkan/icd.d/intel_icd.x86_64.json
export __EGL_VENDOR_LIBRARY_FILENAMES=/usr/share/glvnd/egl_vendor.d/50_mesa.json

export LIBVA_DRIVER_NAME=iHD

# nvidia only
# may need to configure xorg.conf
# cuda usage including nvdec and nvidia-vaapi-driver may cause suspend problems
# prefer vulkan or vdpau for hardware video decoding

export GBM_BACKEND=nvidia-drm
export VK_DRIVER_FILES=/usr/share/vulkan/icd.d/nvidia_icd.x86_64.json
export __EGL_VENDOR_LIBRARY_FILENAMES=/usr/share/glvnd/egl_vendor.d/10_nvidia.json

export LIBVA_DRIVER_NAME=nvidia

export CUDA_DISABLE_PERF_BOOST=1

# intel only in wayland, nvidia only in x11

export VDPAU_DRIVER=nvidia
if [ $XDG_SESSION_TYPE = x11 ];then
export GBM_BACKEND=nvidia-drm;
export VK_DRIVER_FILES=/usr/share/vulkan/icd.d/nvidia_icd.x86_64.json;
export __EGL_VENDOR_LIBRARY_FILENAMES=/usr/share/glvnd/egl_vendor.d/10_nvidia.json
export LIBVA_DRIVER_NAME=nvidia;
export CUDA_DISABLE_PERF_BOOST=1
else if [ $XDG_SESSION_TYPE = wayland ];then
export GBM_BACKEND=dri;
export VK_DRIVER_FILES=/usr/share/vulkan/icd.d/intel_icd.x86_64.json;
export __EGL_VENDOR_LIBRARY_FILENAMES=/usr/share/glvnd/egl_vendor.d/50_mesa.json
export LIBVA_DRIVER_NAME=iHD;
fi;fi

# prime for intel and nouveau

export DRI_PRIME=8086:3e92!
export MESA_VK_DEVICE_SELECT=8086:3e92!

export DRI_PRIME=10de:1c8c!
export MESA_VK_DEVICE_SELECT=10de:1c8c!

# prime for intel and nvidia

export __NV_PRIME_RENDER_OFFLOAD=0
export __GLX_VENDOR_LIBRARY_NAME=mesa
export __VK_LAYER_NV_optimus=non_NVIDIA_only

export __NV_PRIME_RENDER_OFFLOAD=1
export __GLX_VENDOR_LIBRARY_NAME=nvidia
export __VK_LAYER_NV_optimus=NVIDIA_only

# For Vulkan version 1.3.234 or later, VK_LOADER_DRIVERS_SELECT could also be used like:

export VK_LOADER_DRIVERS_DISABLE=*
export VK_LOADER_DRIVERS_SELECT=*intel*

export VK_LOADER_DRIVERS_DISABLE=*
export VK_LOADER_DRIVERS_SELECT=*nvidia*


